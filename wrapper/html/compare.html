<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Compare Page</title>
    <link rel="stylesheet" href="../css/jk.css"/>
    <link rel="stylesheet" href="../css/compare-page.css"/>
    <script src="../js/libs/jquery/jquery.js"></script>
    <script type="text/javascript">
        $(function() {
            var $grid = $('#grid'),
                $propertiesTable = $('#properties table'),
                $productTable    = $('#products table');

            function changeBarMargins () {
                var vertical = $grid.scrollTop();
                var horizontal = $grid.scrollLeft();
                $propertiesTable.css('margin-top', -vertical);
                $productTable.css('margin-left', -horizontal);
            }

            var scrolled = false;
            $grid.scroll(function() {
                scrolled = true;
            });
            setInterval(function() {
                if (scrolled) {
                    changeBarMargins();
                    scrolled = false;
                }
            }, 30);

            //sizing effect
            $(document).ready(function () {
                //set tr rows in properties table
                var $propertyRows = $('#properties tr');
                $('#grid tr').each(function (index) {
                    var height = $(this).css('height')
                    //stupid firefox bug fix
                    $propertyRows.eq(index).
                            css('height', height)
                    $(this).css('height', height);
                });
            });

            //toggle effect
            $('#properties').delegate('.heading div ', 'click', function () {
                var index = $(this).parents('tbody').
                            index(),
                    $icon = $(this).find('.state');

                $(this).parents('tbody').
                        children('tr').
                        not('.heading').
                        slideToggle(1);

                if ( $icon.hasClass('open') ) {
                    $icon.
                        removeClass('open fa-caret-down').
                        addClass('close fa-caret-left');
                } else {
                    $icon.
                            removeClass('close fa-caret-left').
                            addClass('open fa-caret-down');
                }

                $('#grid tbody').eq(index).
                        children('tr').
                        not('.space').
                        slideToggle(1);
            });

            //highlight effect
            $('#properties').delegate('tr', 'mouseover mouseout', function (e) {
                var $el = $(e.target).parents('tr'),
                    index = $el.index('#properties tr');

                if ($el.hasClass('heading')) {
                    return;
                }

                if (e.type == 'mouseover') {
                    $el.css('background-color', '#222');
                    $('#grid tr').eq(index).css('background-color', '#222');
                } else {
                    $el.css('background-color', 'transparent');
                    $('#grid tr').eq(index).css('background-color', 'transparent');
                }
            });

            //remove effect
            $('#products').delegate('td .remove', 'click', function (e) {
                var $el = $(e.target);
                var index = $el.parents('td').index();
                var removeCollection = [];

                //find related tds in grid and hide them
                $('#grid td').each(function () {
                    if ( $(this).index() == index ) {
                        $(this).hide();
                    }
                });
                //hide the product td itself
                $el.parents('td').hide();

                console.log(index);
            });

        });
    </script>
</head>
<body>

<div id="compare-wrapper">

<div id="corner">
    <div>
        <a href="#">More...</a>
    </div>
</div>

<div id="products">
    <table>
        <tbody>
        <tr>
            <td>
                <div class="product-ico">1<i class="fa fa-trash-o remove"></i></div>
            </td>
            <td>
                <div class="product-ico">2<i class="fa fa-trash-o remove"></i></div>
            </td>
            <td>
                <div class="product-ico">3<i class="fa fa-trash-o remove"></i></div>
            </td>
            <td>
                <div class="product-ico">4<i class="fa fa-trash-o remove"></i></div>
            </td>
            <td>
                <div class="product-ico">5<i class="fa fa-trash-o remove"></i></div>
            </td>
            <td>
                <div class="product-ico">6<i class="fa fa-trash-o remove"></i></div>
            </td>
            <td>
                <div class="product-ico">7<i class="fa fa-trash-o remove"></i></div>
            </td>
            <td>
                <div class="product-ico">8<i class="fa fa-trash-o remove"></i></div>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div id="properties">
    <table>
        <tbody>
        <tr class="heading">
            <td>
                <div><i class="state fa open fa-caret-down"></i>گروه</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        </tbody>
        <tbody>
        <tr class="heading">
            <td>
                <div><i class="state fa open fa-caret-down"></i>گروه</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        </tbody>
        <tbody>
        <tr class="heading">
            <td>
                <div><i class="state fa open fa-caret-down"></i>گروه</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>ویژگی</div>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div id="grid">
    <table>
        <tbody>
        <tr class="space">
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
        </tr>
        <tr>
            <td>
                <div>
                    too much contetn
                    too much contetn
                    too much contetn
                    too much contetn
                    too much contetn
                    too much contetn
                    too much contetn
                </div>
            </td>
            <td>
                <div>2</div>
            </td>
            <td>
                <div>3</div>
            </td>
            <td>
                <div>4</div>
            </td>
            <td>
                <div>5</div>
            </td>
            <td>
                <div>6</div>
            </td>
            <td>
                <div>7</div>
            </td>
            <td>
                <div>8</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
        </tr>
        </tbody>
        <tbody>
        <tr class="space">
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
        </tr>
        </tbody>
        <tbody>
        <tr class="space">
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
            <td>
                <div></div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
            <td>
                <div>v1</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
            <td>
                <div>v2</div>
            </td>
        </tr>
        <tr>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
            <td>
                <div>v3</div>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</div>
</body>
</html>